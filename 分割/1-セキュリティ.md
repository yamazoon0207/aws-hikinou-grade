[toc]

# 1. セキュリティ

## 情報セキュリティに関するコンプライアンス

* 順守すべき情報セキュリティに関する組織規程やルール、法令、ガイドライン等が存在する場合に内容を書く
  * リンクなどを貼るなどでも良い

## セキュリティリスク分析範囲

* 脅威範囲を洗い出し影響の分析を実施する際の方針を書く
  * ネットワークを通じた不特定多数の攻撃者からの脅威にさらされるか否か
  * 重要情報が取り扱われているか否か
  * 洗い出した脅威範囲を運用中に見直す時期の有無

## ネットワーク診断実施の有無

* ネットワーク診断実施の有無を書く
  * 目視による設定確認の実施有無
    * Security Group 設定等の目視確認
    * Trusted Advisor 等による確認
  * 疑似攻撃を実施することにより脆弱性を発見する診断（ペネトレーションテスト）の実施有無
    * 参考：AWSでの侵入テストポリシー https://aws.amazon.com/jp/security/penetration-testing/
  * ネットワーク上のサーバや通信機能をもつソフトウェアなどに対する脆弱性調査の実施有無
    * Amazon Inspector の利用有無

## セキュリティパッチ適用

* 以下を書く
  * 適用対象 (OS,MW,DB)
  * 適用時期 (毎月、毎週)
  * 自動適用の有無 
  * 適用後の確認タイミング

## データ暗号化

* 以下を書く
  * 伝送データの暗号化の有無
    * 下に例を記載
  * 蓄積データの暗号化の有無
    * EBSやEFS、RDSのストレージに関する暗号化
  * 鍵管理方法
    * KMS による管理、ユーザーでの管理

* 伝送データ暗号化の例：インターネットを介する通信(インバウンド・アウトバウンド)をする際には基本的に暗号化を行う
    * ELBやCloudFrontを利用する際には無料でACMの証明書を利用可能であるため利用する
    * その他については購入したTLS証明書や自己証明書を適用し暗号化する
    * 暗号化スイートは適切に選択する (2020年4月現在は TLS 1.2 以上を推奨)


## ログ取得・保管

* 取得して監視するログの種類と保管期間を書く
  * OS・ミドルウェアのログ
    * CloudWatch Logs / DataDog などを利用して監視
  * AWSの利用状況の監査認証を目的として、AWSが提供する以下の機能を利用することを推奨する
      - AWS CloudTrail
      - AWS Config
      - VPCフローログ


## ネットワーク制御

* ネットワークの制御方法について書く
* 以下は例

### 基本方針
* ファイアウォールには「セキュリティグループ」を用いる
    * 参考リンク: [VPC のセキュリティグループ](https://docs.aws.amazon.com/ja_jp/vpc/latest/userguide/VPC_SecurityGroups.html)
* 二重管理となるためNACLやOSのファイアウォール機能は使用しない

### 通信毎の基本方針

**インターネット通信**

* inbound と outboundを制御する
    *  outbound を制御する理由としては組織外のリソースに対する不要なアクセスを予め制限することによりセキュリティを高めるため
* 許可するプロトコルを指定して制御する
* 許可するポート番号を指定して制御する
* 許可するCidrは必要最小限の範囲とする(32bitを推奨)
    * システムの特性上必要な場合は any を許可する
* 通信を許可する必要性がある場合に設定を追加する
    *  管理負荷を考慮し拒否設定は行わない

**VPC内部通信**

* inbound のみ制御する
* 許可するプロトコルを指定して制御する
* 許可するポート番号を指定して制御する
* 許可するCidrは必要最小限の範囲とする
* 通信を許可する必要性がある場合に設定を追加する
    *  管理負荷を考慮し拒否設定は行わない

**比較表**

| | インターネット通信 | VPC内部通信 |
| :-------------------------: | :----------: | :-------------: |
| 制御方向 | inbound , outbound | inbound |
| 制御方法 (許可 or 拒否) | 許可 | 許可 |
| Cidr | 必要最小限の範囲を指定する (32bit推奨) | 必要最小限の範囲を指定する |
| プロトコル | 必要最小限の範囲を指定する | 必要最小限の範囲を指定する |
| ポート番号 | 必要最小限の範囲を指定する | 必要最小限の範囲を指定する |

## マルウェア対策

* マルウェア対策の実施有無を書く
  * Deep Security As A Service 等の利用有無

## DDOS対策

* DDOS対策の実施有無を書く
  * 前提として AWS では、レイヤー 3 およびレイヤー 4 の DDoS 攻撃への対処が自動的に行われる
    *  [DDoS 攻撃への対応](https://docs.aws.amazon.com/ja_jp/waf/latest/developerguide/ddos-responding.html) 
        * ただし 全てのレイヤー 3 およびレイヤー 4 の DDoS 攻撃を防げるとは限らない
*  [AWS Best Practices for DDoS Resiliency](https://d1.awsstatic.com/whitepapers/Security/DDoS_White_Paper.pdf) を踏まえると事前対処としては以下となる
    * CloudFrontなどのCDNを用いてコンテンツをキャッシュしておく
    * WEBサーバとなる EC2 は ELB + AutoScaling を用いてトラフィックの増加に耐えることが可能な仕組みにしておく

